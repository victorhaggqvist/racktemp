var RackTemp=function(){"use strict";function t(){var t=new Date,n=t.getHours(),a=t.getMinutes();n=e(n),a=e(a),document.getElementById("clock").innerHTML=n+":"+a}function e(t){return 10>t&&(t="0"+t),t}var n,a,o,r=function(){var t={data:{columns:[],type:"spline",x:"x"}},e={bindto:"#today",data:t.data,axis:{x:{type:"timeseries",tick:{format:"%M"}}},tooltip:{format:{title:function(t){return r(t)}}}},n={bindto:"#today",data:t.data,axis:{x:{label:"Hour",type:"timeseries",tick:{count:12,format:"%H"}},y:{label:{text:"Degree (C)",position:"outer-middle"}}}},a={bindto:"#week",data:t.data,axis:{x:{type:"timeseries",tick:{count:12,format:"%d/%m %H"}},y:{label:{text:"Degree (C)",position:"outer-middle"}}}},o={bindto:"#month",data:t.data,axis:{x:{type:"timeseries",tick:{count:24,format:"%d/%m"}},y:{label:{text:"Degree (C)",position:"outer-middle"}}},tooltip:{format:{title:function(t){return i(t)}}}},r=d3.time.format("%H:%M"),i=d3.time.format("%d/%m %H");return{hour:e,today:n,week:a,month:o}}(),i=function(){var t=document.location.toString();t.match("#")&&$(".nav-tabs a[href=#"+t.split("#")[1]+"]").tab("show"),$(".nav-tabs a").on("shown",function(t){window.location.hash=t.target.hash})},c=function(t){for(var e=t.length-1;e>=0;e--)if(null!==t[e])return!1;return!0},u=function(t){for(var e=1;e<t.length;e++)if(!c(t[e]))return!1;return!0},s=function(t){return"//"+o+"/api/"+t+"?token="+a+"&timestamp="+n},d=function(t,e,r){n=t,a=e,o=r},m=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&e(n.responseText)},n.send()},p='<div class="jumbotron"><p>No chart data jet</p></div>',l=function(){var t=c3.generate(r.today);m(s("graph/span/day"),function(e){var n=JSON.parse(e);RackTemp.isChartEmpty(n)?document.getElementById(r.today.bindto.substring(1)).innerHTML=p:t.load({columns:n})})},f=function(){var t=r.hour,e=c3.generate(t);m(s("graph/span/hour"),function(n){var a=JSON.parse(n);RackTemp.isChartEmpty(a)?document.getElementById(t.bindto.substring(1)).innerHTML=p:e.load({columns:a})})},h=function(){var t=r.week,e=c3.generate(t);m(s("graph/span/week"),function(n){var a=JSON.parse(n);RackTemp.isChartEmpty(a)?document.getElementById(t.bindto.substring(1)).innerHTML=p:e.load({columns:a})})},g=function(){var t=r.month,e=c3.generate(t);m(s("graph/span/month"),function(n){var a=JSON.parse(n);RackTemp.isChartEmpty(a)?document.getElementById(t.bindto.substring(1)).innerHTML=p:e.load({columns:a})})};return{chart:r,clock:t,loadToTab:i,isChartEmpty:u,setApiInfo:d,createChartToday:l,createChartHour:f,createChartWeek:h,createChartMonth:g}}();